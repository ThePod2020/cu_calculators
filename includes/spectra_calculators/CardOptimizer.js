KJE.CardOptimizerCalc=function(){this.NC_RATE=0;this.NC_LIMIT=0;this.NC_BALANCE=0;this.NC_RATE_TERM=0;this.NC_RATE2=0;this.NC_USE=false;this.CC_OPTIMIZED_BALANCE=0;this.NEW_MONTHLY_PAYMENT=0;this.CURRENT_PAYOFF="";this.NEW_PAYOFF="";this.DS_INTEREST=KJE.FloatArray(2);this.DS_INTEREST_BLD=new Array(2);this.DS_PAYMENT_CATS=[KJE.parameters.get("MSG_PAYMENT_CAT1","Current"),KJE.parameters.get("MSG_PAYMENT_CAT2","Optimized")];this.MSG_ALREADY_OPTIMAL=KJE.parameters.get("MSG_ALREADY_OPTIMAL","Your credit card balances are already optimal, there are no recommended balance transfers.");this.MSG_TRANSFER_TEXT1=KJE.parameters.get("MSG_TRANSFER_TEXT1","<LI>Transfer CALC_AMOUNT1 from CREDIT_CARD_FROM at RATE_FROM to CREDIT_CARD_TO at RATE_TO");this.MSG_TRANSFER_TEXT3=KJE.parameters.get("MSG_TRANSFER_TEXT3","<LI>Transfer CALC_AMOUNT1 from CREDIT_CARD_FROM at RATE_FROM to CREDIT_CARD_TO at RATE_TO (for RATE_TERM months, then changes to RATE2_TO)");this.MSG_TRANSFER_TEXT2=KJE.parameters.get("MSG_TRANSFER_TEXT2","CREDIT_CARD at INTEREST_RATE");this.MSG_TRANSFER_TEXT4=KJE.parameters.get("MSG_TRANSFER_TEXT4","CREDIT_CARD at INTEREST_RATE (for RATE_TERM months, then changes to RATE2_TO)");this.MSG_CREDIT_CARD=KJE.parameters.get("MSG_CREDIT_CARD","Credit Card");this.MSG_PAYOFF_30=KJE.parameters.get("MSG_PAYOFF_30","more than 30 years");this.NC_NAME=KJE.parameters.get("MSG_NC_CARD_NAME","new low interest card");this.MSG_NEW_CARD_LBL=KJE.parameters.get("MSG_NEW_CARD_LBL","Check here to include a CARD_NAME.");this.CC_COUNT=KJE.parameters.get("CC_COUNT",6);this.CC_LIMIT=KJE.FloatArray(this.CC_COUNT);this.CC_BALANCE=KJE.FloatArray(this.CC_COUNT);this.CC_RATE=KJE.FloatArray(this.CC_COUNT);this.CC_RATE2=KJE.FloatArray(this.CC_COUNT);this.CC_RATE_TERM=KJE.IntArray(this.CC_COUNT);this.CC_PAYMENT=KJE.FloatArray(this.CC_COUNT);this.CC_OPTIMIZED=KJE.FloatArray(this.CC_COUNT);this.CC_OPTIMIZED_PAYMENTS=KJE.FloatArray(this.CC_COUNT);this.CC_SORT_ORDER=new Array(this.CC_COUNT);this.CC_BALANCE_REMAINING=KJE.FloatArray(this.CC_COUNT);this.ccBal=KJE.FloatArray(this.CC_COUNT);this.ccBalOptimize=KJE.FloatArray(this.CC_COUNT);this.CC_OPTIMIZED_TERM=KJE.FloatArray(this.CC_COUNT);this.sSchedule=new KJE.Repeating()};KJE.CardOptimizerCalc.prototype.clear=function(){this.NC_BALANCE=0;this.NC_RATE_TERM=0;this.NC_RATE2=0;for(var a=0;a<this.CC_COUNT;a++){this.CC_RATE2[a]=0;this.CC_RATE_TERM[a]=0}};KJE.CardOptimizerCalc.prototype.calculate=function(N){var d=KJE;var x=0;var f=0;var E=0;var r=0;var H=0;var j=0;var L="";var R=this.CC_COUNT;if(this.NC_USE){this.CC_LIMIT[R-1]=this.NC_LIMIT;this.CC_RATE[R-1]=this.NC_RATE;this.CC_RATE2[R-1]=this.NC_RATE2;this.CC_RATE_TERM[R-1]=this.NC_RATE_TERM;this.CC_BALANCE[R-1]=this.NC_BALANCE}else{this.CC_LIMIT[R-1]=0;this.CC_RATE[R-1]=0;this.CC_RATE2[R-1]=0;this.CC_RATE_TERM[R-1]=0;this.CC_BALANCE[R-1]=0}var b="";var Q="";var A="";for(var O=0;O<R;O++){if(this.CC_RATE_TERM[O]==0){this.CC_RATE2[O]=this.CC_RATE[O]}this.CC_SORT_ORDER[O]=O;this.CC_OPTIMIZED[O]=this.CC_BALANCE[O];this.CC_BALANCE_REMAINING[O]=this.CC_LIMIT[O]-this.CC_BALANCE[O];this.CC_PAYMENT[O]=this.CCPayment(true,this.CC_BALANCE[O],this.CC_PAYMENT[O]);j+=this.CC_LIMIT[O];x+=this.CC_PAYMENT[O];r+=this.CC_BALANCE[O];f+=this.CC_BALANCE[O]*this.CC_RATE[O]}this.CC_OPTIMIZED_BALANCE=r;for(var O=0;O<R;O++){for(var J=1;J<R;J++){if(this.CC_RATE[this.CC_SORT_ORDER[J-1]]>this.CC_RATE[this.CC_SORT_ORDER[J]]){var s=this.CC_SORT_ORDER[J-1];this.CC_SORT_ORDER[J-1]=this.CC_SORT_ORDER[J];this.CC_SORT_ORDER[J]=s}}}for(var O=R-1;O>=0;O--){for(var J=1;J<R;J++){if(this.CC_OPTIMIZED[this.CC_SORT_ORDER[O]]>0&&this.CC_BALANCE_REMAINING[this.CC_SORT_ORDER[J]]>0&&this.CC_RATE[this.CC_SORT_ORDER[J]]<this.CC_RATE[this.CC_SORT_ORDER[O]]){var M=this.CC_BALANCE_REMAINING[this.CC_SORT_ORDER[J]];if(M>this.CC_OPTIMIZED[this.CC_SORT_ORDER[O]]){M=this.CC_OPTIMIZED[this.CC_SORT_ORDER[O]]}this.CC_BALANCE_REMAINING[this.CC_SORT_ORDER[J]]-=M;this.CC_OPTIMIZED[this.CC_SORT_ORDER[J]]+=M;this.CC_OPTIMIZED[this.CC_SORT_ORDER[O]]-=M;L+=KJE.replace("RATE_TERM",KJE.number(this.CC_RATE_TERM[this.CC_SORT_ORDER[J]],0),KJE.replace("RATE2_TO",KJE.percent(this.CC_RATE2[this.CC_SORT_ORDER[J]]/100,2),KJE.replace("RATE_TO",KJE.percent(this.CC_RATE[this.CC_SORT_ORDER[J]]/100,2),KJE.replace("CREDIT_CARD_TO",(this.CC_SORT_ORDER[J]==(R-1)?this.NC_NAME:this.MSG_CREDIT_CARD+" "+(this.CC_SORT_ORDER[J]+1)),KJE.replace("RATE_FROM",KJE.percent(this.CC_RATE[this.CC_SORT_ORDER[O]]/100,2),KJE.replace("CREDIT_CARD_FROM",(this.CC_SORT_ORDER[O]==(R-1)?this.NC_NAME:this.MSG_CREDIT_CARD+" "+(this.CC_SORT_ORDER[O]+1)),KJE.replace("CALC_AMOUNT1",KJE.dollars(M),this.CC_RATE_TERM[this.CC_SORT_ORDER[J]]==0?this.MSG_TRANSFER_TEXT1:this.MSG_TRANSFER_TEXT3)))))))}}}for(var O=0;O<R;O++){this.CC_OPTIMIZED_TERM[O]=0;if(this.CC_BALANCE[O]>0||this.CC_OPTIMIZED[O]>0){b+="<tr class="+(O%2==1?"KJEEvenRow":"KJEOddRow")+"><td class='KJELabel KJECellBorder'>"+KJE.replace("INTEREST_RATE",KJE.percent(this.CC_RATE[O]/100,2),KJE.replace("RATE_TERM",KJE.number(this.CC_RATE_TERM[O],0),KJE.replace("RATE2_TO",KJE.percent(this.CC_RATE2[O]/100,2),KJE.replace("CREDIT_CARD",(O==(R-1)?this.NC_NAME:this.MSG_CREDIT_CARD+" "+(O+1)),this.CC_RATE_TERM[O]==0?this.MSG_TRANSFER_TEXT2:this.MSG_TRANSFER_TEXT4))))+"</td><td class='KJECell KJECellBorder'>"+KJE.dollars(this.CC_BALANCE[O])+"</td><td class='KJECell KJECellBorder'>"+KJE.dollars(this.CC_PAYMENT[O])+"</td><td class='KJECell KJECellBorder'>"+KJE.dollars(this.CC_OPTIMIZED[O])+"</td><td class=KJECell>"+KJE.dollars(this.CCPayment(true,this.CC_OPTIMIZED[O],0))+"</td></tr>"}if(this.CC_BALANCE[O]>0){Q+="<tr class="+(O%2==1?"KJEEvenRow":"KJEOddRow")+"><th class='KJELabel KJECellBorder' scope='row'>"+KJE.replace("INTEREST_RATE",KJE.percent(this.CC_RATE[O]/100,2),KJE.replace("RATE_TERM",KJE.number(this.CC_RATE_TERM[O],0),KJE.replace("RATE2_TO",KJE.percent(this.CC_RATE2[O]/100,2),KJE.replace("CREDIT_CARD",(O==(R-1)?this.NC_NAME:this.MSG_CREDIT_CARD+" "+(O+1)),this.CC_RATE_TERM[O]==0?this.MSG_TRANSFER_TEXT2:this.MSG_TRANSFER_TEXT4))))+"</th><td class='KJECell KJECellBorder'>"+KJE.dollars(this.CC_BALANCE[O])+"</td><td class='KJECell KJECellBorder'>"+KJE.dollars(this.CC_PAYMENT[O])+"</td></tr>"}if(this.CC_OPTIMIZED[O]>0){A+="<tr class="+(O%2==1?"KJEEvenRow":"KJEOddRow")+"><th class='KJELabel KJECellBorder' scope='row'>"+KJE.replace("INTEREST_RATE",KJE.percent(this.CC_RATE[O]/100,2),KJE.replace("RATE_TERM",KJE.number(this.CC_RATE_TERM[O],0),KJE.replace("RATE2_TO",KJE.percent(this.CC_RATE2[O]/100,2),KJE.replace("CREDIT_CARD",(O==(R-1)?this.NC_NAME:this.MSG_CREDIT_CARD+" "+(O+1)),this.CC_RATE_TERM[O]==0?this.MSG_TRANSFER_TEXT2:this.MSG_TRANSFER_TEXT4))))+"</th><td class='KJECell KJECellBorder'>"+KJE.dollars(this.CC_OPTIMIZED[O])+"</td><td class='KJECell KJECellBorder'>"+KJE.dollars(this.CCPayment(true,this.CC_OPTIMIZED[O],0))+"</td></tr>"}}if(L==("")){L="<ol>"+this.MSG_ALREADY_OPTIMAL+"</ol>"}else{L="<ol>"+L+"</ol>"}if(f>0&&r>0){f=(f/100)/r}else{f=0}this.NEW_MONTHLY_PAYMENT=x;for(var O=0;O<R;O++){this.CC_OPTIMIZED_PAYMENTS[O]=this.CCPayment(true,this.CC_OPTIMIZED[O],this.CC_PAYMENT[O]);this.CC_OPTIMIZED_RATE+=this.CC_OPTIMIZED[O]*this.CC_RATE[O]}if(this.CC_OPTIMIZED_RATE>0&&r>0){this.CC_OPTIMIZED_RATE=(this.CC_OPTIMIZED_RATE/100)/r}else{this.CC_OPTIMIZED_RATE=0}this.CC_OPTIMIZED_BALANCE=r;var g=Math.round(362);var P=0;this.DR_BALANCE=KJE.FloatArray(g);this.DR_PRINCIPAL=KJE.FloatArray(g);this.DR_INTEREST=KJE.FloatArray(g);this.DR_PAYMENT=KJE.FloatArray(g);this.DR_NEW_PAYMENT=KJE.FloatArray(g);this.DR_NEW_BALANCE=KJE.FloatArray(g);this.DR_NEW_PRINCIPAL=KJE.FloatArray(g);this.DR_NEW_INTEREST=KJE.FloatArray(g);var o=0;var m=0;var C=r;var G=r;var z=0;var h=0;var t=0;var v=0;var c=0;var e=this.ccBal;var a=this.ccBalOptimize;for(O=0;(O<362&&(C>0||G>0));O++){C=0;G=0;for(var K=0;K<R;K++){if(this.CC_BALANCE[K]>0){if(O==0){e[K]=this.CC_BALANCE[K]}t=e[K]*((this.CC_RATE_TERM[K]>O?this.CC_RATE2[K]:this.CC_RATE[K])/1200);v=this.CCPayment(true,e[K],this.CC_PAYMENT[K]);c=v-t;if(c>e[K]){v=e[K]+t;c=e[K]}o+=t;e[K]-=c;if(O<g){this.DR_BALANCE[O]+=e[K];this.DR_INTEREST[O]+=t;this.DR_PAYMENT[O]+=v;this.DR_PRINCIPAL[O]+=c}C+=e[K]}}var B=0;for(var K=0;K<R;K++){if(this.CC_OPTIMIZED[K]>0){if(O==0){a[K]=this.CC_OPTIMIZED[K]}t=a[K]*((this.CC_RATE_TERM[K]>O?this.CC_RATE2[K]:this.CC_RATE[K])/1200);v=this.CCPayment(true,a[K],this.CC_PAYMENT[K]);c=v-t;if(c>a[K]){v=a[K]+t;c=a[K]}B+=v;m+=t;a[K]-=c;if(O<g){this.DR_NEW_BALANCE[O]+=a[K];this.DR_NEW_INTEREST[O]+=t;this.DR_NEW_PAYMENT[O]+=v;this.DR_NEW_PRINCIPAL[O]+=c}G+=a[K];if(a[K]<=0){this.CC_OPTIMIZED_TERM[K]=O+1}}}if(C<=0&&z==0){z=O+1}if(G<=0&&h==0){h=O+1}}if(z==0){z=360;this.CURRENT_PAYOFF=this.MSG_PAYOFF_30}else{this.CURRENT_PAYOFF=KJE.getTermLabel(z)}if(h==0){h=360;this.NEW_PAYOFF=this.MSG_PAYOFF_30}else{this.NEW_PAYOFF=KJE.getTermLabel(h)}this.CURRENT_PAYOFF_MONTHS=z;this.DS_INTEREST[0]=o;this.DS_INTEREST_BLD[0]=" "+KJE.dollars(o);this.DS_INTEREST[1]=m;this.DS_INTEREST_BLD[1]=" "+KJE.dollars(m);if(N){var F=this.sSchedule;F.clearRepeat();F.addHeader("&nbsp;",{sCell:KJE._sHeadingUnderline,sContent:F.sReportCol("Current Payment Schedule",1),sFormat:"COLSPAN=3"},{sCell:KJE._sHeadingUnderline,sContent:F.sReportCol("Optimized Payment Schedule",2),sFormat:"COLSPAN=3"});F.addHeader(F.sReportCol("Year",3),F.sReportCol("Payments",4),F.sReportCol("Interest",5),F.sReportCol("Balance",6),F.sReportCol("Payments",4),F.sReportCol("Interest",5),F.sReportCol("Balance",6));F.addRepeat("&nbsp;","&nbsp;","&nbsp;",KJE.dollars(r),"&nbsp;","&nbsp;",KJE.dollars(r))}var J=0;g=(z>h?z:h);var p=Math.floor(g/12+1);if(g>=120){p=12}var k=Math.floor(g/p)+1;this.cats=KJE.FloatArray(k);this.DS_BALANCE=KJE.FloatArray(k);this.DS_NEW_BALANCE=KJE.FloatArray(k);this.cats[J]="0";this.DS_BALANCE[J]=(r);this.DS_NEW_BALANCE[J++]=(r);var l=0;var w=0;var I=0;var q=0;for(O=1;O<=g;O++){P=O-1;if(O%p==0){this.cats[J]=""+(g<120?J*p:J);this.DS_BALANCE[J]=((this.DR_BALANCE[P]));this.DS_NEW_BALANCE[J++]=((this.DR_NEW_BALANCE[P]))}if(N){l+=this.DR_NEW_PAYMENT[P]-this.DR_NEW_PRINCIPAL[P];w+=this.DR_NEW_PAYMENT[P];I+=this.DR_PAYMENT[P]-this.DR_PRINCIPAL[P];q+=this.DR_PAYMENT[P];if((O%12)==0||O==g){F.addRepeat((Math.floor((O+11)/12)),KJE.dollars(q),KJE.dollars(I),KJE.dollars(this.DR_BALANCE[P]),KJE.dollars(w),KJE.dollars(l),KJE.dollars(this.DR_NEW_BALANCE[P]));l=0;w=0;I=0;q=0}}}this.CC_MONTHLY_PAYMENT=x;this.CC_AVERAGE_RATE=f;this.CC_OPTIMIZED_RATE=E;this.CC_OUTSTANDING_BALANCE=r;this.INTEREST_CURRENT=o;this.INTEREST_NEW=m;this.CURRENT_PAYOFF_MONTHS=H;this.CC_CREDIT_LIMIT=j;this.CREDIT_CARD_DETAILS=b;this.CREDIT_CARD_DETAILS_OPTIMAL=A;this.CREDIT_CARD_DETAILS_CURRENT=Q;this.CREDIT_CARD_TRANSFERS=L};KJE.CardOptimizerCalc.prototype.formatReport=function(b){var c=KJE;var a=this.iDecimal;var d=b;d=KJE.replace("CC_OUTSTANDING_BALANCE",c.dollars(this.CC_OUTSTANDING_BALANCE),d);d=KJE.replace("CC_MONTHLY_PAYMENT",c.dollars(this.CC_MONTHLY_PAYMENT),d);d=KJE.replace("CC_AVERAGE_RATE",c.percent(this.CC_AVERAGE_RATE,2),d);d=KJE.replace("CC_CREDIT_LIMIT",c.dollars(this.CC_CREDIT_LIMIT),d);d=KJE.replace("CC_OPTIMIZED_BALANCE",c.dollars(this.CC_OPTIMIZED_BALANCE),d);d=KJE.replace("CREDIT_CARD_TRANSFERS",this.CREDIT_CARD_TRANSFERS,d);d=KJE.replace("NEW_MONTHLY_PAYMENT",c.dollars(this.NEW_MONTHLY_PAYMENT),d);d=KJE.replace("CURRENT_PAYOFF",this.CURRENT_PAYOFF,d);d=KJE.replace("NEW_PAYOFF",this.NEW_PAYOFF,d);d=KJE.replace("INTEREST_CURRENT",c.dollars(this.INTEREST_CURRENT),d);d=KJE.replace("INTEREST_NEW",c.dollars(this.INTEREST_NEW),d);d=KJE.replace("INTEREST_SAVINGS",c.dollars(this.INTEREST_CURRENT-this.INTEREST_NEW),d);d=KJE.replace("<!--CREDIT_CARD_DETAILS_CURRENT-->",this.CREDIT_CARD_DETAILS_CURRENT,d);d=KJE.replace("<!--CREDIT_CARD_DETAILS_OPTIMAL-->",this.CREDIT_CARD_DETAILS_OPTIMAL,d);d=KJE.replace("<!--CREDIT_CARD_DETAILS-->",this.CREDIT_CARD_DETAILS,d);d=KJE.replace("CREDIT_CARD_TRANSFERS",this.CREDIT_CARD_TRANSFERS,d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.CardOptimizerCalc.prototype.CCPayment=function(b,c,d){if(c<=0){return 0}var a=c*KJE.CardOptimizerCalc.CC_MIN_PAYMENT_PERCENT;if(b){a=(a<KJE.CardOptimizerCalc.CC_MIN?KJE.CardOptimizerCalc.CC_MIN:a)}else{a=d}return a};KJE.CardOptimizerCalc.CC_MIN=15;KJE.CardOptimizerCalc.CC_MIN_PAYMENT_PERCENT=0.04;KJE.CalcName="Credit Card Optimizer Calculator";KJE.CalcType="CardOptimizer";KJE.CalculatorTitleTemplate="Optimized credit card total monthly payment is KJE1";KJE.parseInputs=function(a){var b=KJE.getDropBox("RATE_STATUS",KJE.parameters.get("CALCULATE_BY",0),KJE.Default.RATE_STATUS_ID,KJE.Default.RATE_STATUS_DESC);a=KJE.replace("**RATE_STATUS**",b,a);return a};KJE.initialize=function(){KJE.CalcControl=new KJE.CardOptimizerCalc();KJE.GuiControl=new KJE.CardOptimizer(KJE.CalcControl)};KJE.CardOptimizer=function(q){var g=KJE;var c=KJE.gLegend;var h=KJE.inputs.items;this.sNewCardLabel=KJE.replace("CARD_NAME",q.NC_NAME,q.MSG_NEW_CARD_LBL);KJE.Checkbox("NC_USE","Include new card",true,this.sNewCardLabel);KJE.DollarSlider("NC_BALANCE","Credit card balance",0,1000000,2,0,2);KJE.PercentSlider("NC_RATE","New credit card rate",0,36,2,1);KJE.NumberSlider("NC_RATE_TERM","Promotional rate term",1,48,0);KJE.PercentSlider("NC_RATE2","Non-promotional rate",0,36,2,1);KJE.DollarSlider("NC_LIMIT","Credit limit",0,1000000,2,0,2);KJE.Label("NC_OPTIMIZED_PAYMENTS","Optimized monthly payment");KJE.Label("NC_OPTIMIZED_TERM","Optimized length of payments");KJE.Label("NC_RATE_TERM_DISPLAY","Promotional rate term");KJE.Label("NC_RATE_DISPLAY","Promotional rate");KJE.Label("NC_RATE2_DISPLAY","Non-promotional rate");this.MSG_NC_RATE_DISPLAY2=KJE.parameters.get("MSG_NC_RATE_DISPLAY2","KJE1");this.MSG_RATE_TERM_DISPLAY2=KJE.parameters.get("MSG_NC_RATE_TERM_DISPLAY2","KJE1 months");KJE.Label("NC_OPTIMIZED","Optimized balance");this.USE_CREDIT_SCORE=KJE.parameters.get("USE_CREDIT_SCORE",false);if(this.USE_CREDIT_SCORE){KJE.DropBox("RATE_STATUS","Credit score",null,null,"bold")}for(var e=0;e<q.CC_COUNT-1;e++){KJE.InputItem.AltHelpName="CC_BALANCE";KJE.DollarSlider("CC_BALANCE"+(e+1),KJE.parameters.get("MSG_CC_BALANCE","Credit card balance"),0,1000000,2,0,2);KJE.InputItem.AltHelpName="CC_RATE";KJE.PercentSlider("CC_RATE"+(e+1),KJE.parameters.get("MSG_CC_RATE","Credit card rate"),0,36,2,1);KJE.InputItem.AltHelpName="CC_LIMIT";KJE.DollarSlider("CC_LIMIT"+(e+1),KJE.parameters.get("MSG_CC_LIMIT","Credit limit"),0,1000000,2,0,2);KJE.InputItem.AltHelpName="CC_PAYMENT";KJE.Label("CC_PAYMENT"+(e+1),KJE.parameters.get("MSG_CC_PAYMENT","Current Monthly payment"));KJE.InputItem.AltHelpName="CC_OPTIMIZED";KJE.Label("CC_OPTIMIZED"+(e+1),KJE.parameters.get("MSG_CC_OPTIMIZED","Optimized balance"));KJE.InputItem.AltHelpName="CC_OPTIMIZED_PAYMENTS";KJE.Label("CC_OPTIMIZED_PAYMENTS"+(e+1),KJE.parameters.get("MSG_CC_OPTIMIZED_PAYMENTS","Optimized monthly payment"));KJE.InputItem.AltHelpName=null;KJE.Label("CC_OPTIMIZED_TERM"+(e+1),KJE.parameters.get("MSG_CC_OPTIMIZED_TERM","Optimized length of payments"))}var i=KJE.gNewGraph(KJE.gCATEGORIES,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH_TITLE","Total interest savings KJE1"));i._showItemLabel=true;i._showItemLabelOnTop=true;i._axisX.setVisible(false);i._axisX._fSpacingPercent=0.33;i._legend._iOrientation=(c.TOP_RIGHT);i._titleXAxis.setText(this.MSG_INTEREST_PAYMENT);i._bPopDetail=true;this.MSG_CREDIT_CARDS=KJE.parameters.get("MSG_CREDIT_CARDS","Credit Cards");this.MSG_OPTIMIZED_ENTRY_TITLE=KJE.parameters.get("MSG_OPTIMIZED_ENTRY_TITLE","Optimized Balances");var b=KJE.parameters.get("MSG_DROPPER_TITLE","Existing credit card");var d=KJE.parameters.get("MSG_DROPPER_CLOSETITLE","Monthly Payment: KJE1");var r=KJE.parameters.get("MSG_NC_DROPPER_CLOSETITLE",d);var a=KJE.parameters.get("MSG_DROPPER_INPUT","New low interest card:");var f=function(){return a+"|"+(q.NC_USE?KJE.subText(KJE.getKJEReplaced(r,g.dollars(q.CC_OPTIMIZED_PAYMENTS[5])),"KJERightBold"):"")};KJE.addDropper(new KJE.Dropper("INPUTS",false,f,f),KJE.colorList[0]);var p=function(){return KJE.parameters.get("MSG_DROPPER_TITLE1",b+" #1")+" |"+KJE.subText(KJE.getKJEReplaced(d,g.dollars(q.CC_PAYMENT[0])),"KJERightBold")};var o=function(){return KJE.parameters.get("MSG_DROPPER_TITLE2",b+" #2")+"|"+KJE.subText(KJE.getKJEReplaced(d,g.dollars(q.CC_PAYMENT[1])),"KJERightBold")};var m=function(){return KJE.parameters.get("MSG_DROPPER_TITLE3",b+" #3")+"|"+KJE.subText(KJE.getKJEReplaced(d,g.dollars(q.CC_PAYMENT[2])),"KJERightBold")};var k=function(){return KJE.parameters.get("MSG_DROPPER_TITLE4",b+" #4")+"|"+KJE.subText(KJE.getKJEReplaced(d,g.dollars(q.CC_PAYMENT[3])),"KJERightBold")};var j=function(){return KJE.parameters.get("MSG_DROPPER_TITLE5",b+" #5")+"|"+KJE.subText(KJE.getKJEReplaced(d,g.dollars(q.CC_PAYMENT[4])),"KJERightBold")};if(q.CC_COUNT>1){KJE.addDropper(new KJE.Dropper("INPUTS1",false,p,p),KJE.colorList[0])}if(q.CC_COUNT>2){KJE.addDropper(new KJE.Dropper("INPUTS2",false,o,o),KJE.colorList[0])}if(q.CC_COUNT>3){KJE.addDropper(new KJE.Dropper("INPUTS3",false,m,m),KJE.colorList[0])}if(q.CC_COUNT>4){KJE.addDropper(new KJE.Dropper("INPUTS4",false,k,k),KJE.colorList[0])}if(q.CC_COUNT>5){KJE.addDropper(new KJE.Dropper("INPUTS5",false,j,j),KJE.colorList[0])}};KJE.CardOptimizer.prototype.setValues=function(b){var a=KJE.inputs.items;for(var c=0;c<b.CC_COUNT-1;c++){b.CC_BALANCE[c]=a["CC_BALANCE"+(c+1)].getValue();b.CC_RATE[c]=a["CC_RATE"+(c+1)].getValue();b.CC_LIMIT[c]=a["CC_LIMIT"+(c+1)].getValue()}b.NC_USE=a.NC_USE.getValue();if(b.NC_USE){a.NC_RATE.enable();a.NC_LIMIT.enable();a.NC_OPTIMIZED.enable();a.NC_OPTIMIZED_PAYMENTS.enable();if(this.USE_CREDIT_SCORE){b.NC_RATE=KJE.Default.RATE_PROMO[a.RATE_STATUS.getValue()];b.NC_RATE2=KJE.Default.RATE_STANDARD[a.RATE_STATUS.getValue()]}else{b.NC_RATE=a.NC_RATE.getValue();b.NC_USE=a.NC_USE.getValue();if(a.NC_RATE2){b.NC_RATE2=a.NC_RATE2.getValue()}else{b.NC_RATE2=0}}b.NC_LIMIT=a.NC_LIMIT.getValue();if(a.NC_BALANCE){b.NC_BALANCE=a.NC_BALANCE.getValue()}else{b.NC_BALANCE=0}if(a.NC_RATE_TERM){b.NC_RATE_TERM=a.NC_RATE_TERM.getValue()}else{b.NC_RATE_TERM=0}}else{a.NC_RATE.disable();a.NC_LIMIT.disable();a.NC_OPTIMIZED.disable();a.NC_OPTIMIZED_PAYMENTS.disable();b.NC_RATE=0;b.NC_LIMIT=0;b.NC_BALANCE=0;b.NC_RATE_TERM=0;b.NC_RATE2=0;b.NC_USE=false}};KJE.CardOptimizer.prototype.refresh=function(e){var c=KJE.inputs.items;var b=KJE.dollars;var d=KJE.percent;var a=KJE.gGraphs[0];KJE.setTitleTemplate(b(e.NEW_MONTHLY_PAYMENT));a.removeAll();a._legend.setVisible(true);a.setGraphCategories(e.DS_PAYMENT_CATS);a._sGraphCatagoriesBold=e.DS_INTEREST_BLD;a.add(new KJE.gGraphDataSeries(e.DS_INTEREST,"",a.getColor(1)));a.setTitleTemplate(b(e.INTEREST_CURRENT-e.INTEREST_NEW));a.paint();for(var f=0;f<e.CC_COUNT-1;f++){c["CC_PAYMENT"+(f+1)].setText(b(e.CC_PAYMENT[f],2));c["CC_OPTIMIZED"+(f+1)].setText(b(e.CC_OPTIMIZED[f],2));c["CC_OPTIMIZED_PAYMENTS"+(f+1)].setText(b(e.CC_OPTIMIZED_PAYMENTS[f],2));if(c["CC_OPTIMIZED_TERM"+(f+1)]){c["CC_OPTIMIZED_TERM"+(f+1)].setText(KJE.getTermLabel(e.CC_OPTIMIZED_TERM[f]))}}c.NC_OPTIMIZED.setText(e.NC_USE?b(e.CC_OPTIMIZED[e.CC_COUNT-1],2):"",true);c.NC_OPTIMIZED_PAYMENTS.setText(e.NC_USE?b(e.CC_OPTIMIZED_PAYMENTS[e.CC_COUNT-1],2):"",true);if(c.NC_OPTIMIZED_TERM){c.NC_OPTIMIZED_TERM.setText(e.NEW_PAYOFF)}if(c.NC_RATE_DISPLAY){c.NC_RATE_DISPLAY.setText(KJE.getKJEReplaced(this.MSG_NC_RATE_DISPLAY2,d(e.NC_RATE/100,3)))}if(c.NC_RATE2_DISPLAY){c.NC_RATE2_DISPLAY.setText(KJE.getKJEReplaced(this.MSG_NC_RATE_DISPLAY2,d(e.NC_RATE2/100,3)))}if(this.USE_CREDIT_SCORE){if(c.NC_RATE_TERM_DISPLAY){c.NC_RATE_TERM_DISPLAY.setText(KJE.getKJEReplaced(this.MSG_RATE_TERM_DISPLAY2,KJE.number(e.NC_RATE_TERM)))}}};KJE.Default.RATE_STATUS_DESC=KJE.parameters.get("ARRAY_RATE_STATUS_DESC",["High 740-680","Mid 600-679","Below 600"]);KJE.Default.RATE_STATUS_ID=KJE.parameters.get("ARRAY_RATE_STATUS_ID",[0,1,2]);KJE.Default.RATE_PROMO=KJE.parameters.get("ARRAY_RATE_PROMO",[1.99,4.99,7.99]);KJE.Default.RATE_STANDARD=KJE.parameters.get("ARRAY_RATE_STANDARD",[7.99,11.99,15.99]);KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-NC_USE'><input id='KJE-NC_USE' type=checkbox name='NC_USE' /></div> <div id='KJE-C-NC_RATE'><input id='KJE-NC_RATE' /></div> <div id='KJE-C-NC_LIMIT'><input id='KJE-NC_LIMIT' /></div> <div id='KJE-C-NC_OPTIMIZED_PAYMENTS'><div id='KJE-NC_OPTIMIZED_PAYMENTS'></div></div> <div id='KJE-C-NC_OPTIMIZED'><div id='KJE-NC_OPTIMIZED'></div></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS1><div id=KJE-P-INPUTS1>Input information:</div></div> <div id=KJE-E-INPUTS1 > <div id='KJE-C-CC_BALANCE1'><input id='KJE-CC_BALANCE1' /></div> <div id='KJE-C-CC_RATE1'><input id='KJE-CC_RATE1' /></div> <div id='KJE-C-CC_LIMIT1'><input id='KJE-CC_LIMIT1' /></div> <div id='KJE-C-CC_PAYMENT1'><div id='KJE-CC_PAYMENT1'></div></div> <div id='KJE-C-CC_OPTIMIZED1'><div id='KJE-CC_OPTIMIZED1'></div></div> <div id='KJE-C-CC_OPTIMIZED_PAYMENTS1'><div id='KJE-CC_OPTIMIZED_PAYMENTS1'></div></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS2><div id=KJE-P-INPUTS2>Input information:</div></div> <div id=KJE-E-INPUTS2 > <div id='KJE-C-CC_BALANCE2'><input id='KJE-CC_BALANCE2' /></div> <div id='KJE-C-CC_RATE2'><input id='KJE-CC_RATE2' /></div> <div id='KJE-C-CC_LIMIT2'><input id='KJE-CC_LIMIT2' /></div> <div id='KJE-C-CC_PAYMENT2'><div id='KJE-CC_PAYMENT2'></div></div> <div id='KJE-C-CC_OPTIMIZED2'><div id='KJE-CC_OPTIMIZED2'></div></div> <div id='KJE-C-CC_OPTIMIZED_PAYMENTS2'><div id='KJE-CC_OPTIMIZED_PAYMENTS2'></div></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS3><div id=KJE-P-INPUTS3>Input information:</div></div> <div id=KJE-E-INPUTS3 > <div id='KJE-C-CC_BALANCE3'><input id='KJE-CC_BALANCE3' /></div> <div id='KJE-C-CC_RATE3'><input id='KJE-CC_RATE3' /></div> <div id='KJE-C-CC_LIMIT3'><input id='KJE-CC_LIMIT3' /></div> <div id='KJE-C-CC_PAYMENT3'><div id='KJE-CC_PAYMENT3'></div></div> <div id='KJE-C-CC_OPTIMIZED3'><div id='KJE-CC_OPTIMIZED3'></div></div> <div id='KJE-C-CC_OPTIMIZED_PAYMENTS3'><div id='KJE-CC_OPTIMIZED_PAYMENTS3'></div></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS4><div id=KJE-P-INPUTS4>Input information:</div></div> <div id=KJE-E-INPUTS4 > <div id='KJE-C-CC_BALANCE4'><input id='KJE-CC_BALANCE4' /></div> <div id='KJE-C-CC_RATE4'><input id='KJE-CC_RATE4' /></div> <div id='KJE-C-CC_LIMIT4'><input id='KJE-CC_LIMIT4' /></div> <div id='KJE-C-CC_PAYMENT4'><div id='KJE-CC_PAYMENT4'></div></div> <div id='KJE-C-CC_OPTIMIZED4'><div id='KJE-CC_OPTIMIZED4'></div></div> <div id='KJE-C-CC_OPTIMIZED_PAYMENTS4'><div id='KJE-CC_OPTIMIZED_PAYMENTS4'></div></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS5><div id=KJE-P-INPUTS5>Input information:</div></div> <div id=KJE-E-INPUTS5 > <div id='KJE-C-CC_BALANCE5'><input id='KJE-CC_BALANCE5' /></div> <div id='KJE-C-CC_RATE5'><input id='KJE-CC_RATE5' /></div> <div id='KJE-C-CC_LIMIT5'><input id='KJE-CC_LIMIT5' /></div> <div id='KJE-C-CC_PAYMENT5'><div id='KJE-CC_PAYMENT5'></div></div> <div id='KJE-C-CC_OPTIMIZED5'><div id='KJE-CC_OPTIMIZED5'></div></div> <div id='KJE-C-CC_OPTIMIZED_PAYMENTS5'><div id='KJE-CC_OPTIMIZED_PAYMENTS5'></div></div> <div style=\"height:10px\"></div> </div> **GRAPH1** ";KJE.DefinitionText=" <div id='KJE-D-CC_BALANCE' ><dt>Balance</dt><dd>Your current balance on your credit card.</dd></div> <div id='KJE-D-CC_RATE' ><dt>Interest rate</dt><dd>The annual percentage rate you pay on this credit card. The rate you enter is used to calculate the interest on all future payments for the credit card. The length of time to pay off this credit card may be much greater than calculated if you enter a low promotional interest rate that is only fixed for short period of time.</dd></div> <div id='KJE-D-CC_PAYMENT' ><dt>Payment</dt><dd>This is your initial minimum monthly payment. We calculate your minimum monthly payment as 4% of your current outstanding balance or $15 whichever is more. While your actual minimum monthly payment may be slightly different, this is one of the most common methods used by credit card companies to calculate minimum payments.</dd></div> <div id='KJE-D-CC_LIMIT' ><dt>Credit limit</dt><dd>This is the total amount of credit you have on this credit card. The optimizer will not allow you to have credit card balances that are over your credit limit.</dd></div> <div id='KJE-D-NC_USE' ><dt>Include a new low interest credit card</dt><dd>Check this box to include a new credit card in the optimization. This allows you to transfer your existing balances to a new low interest card and see the results.</dd></div> <div id='KJE-D-NC_LIMIT' ><dt>New credit card limit</dt><dd>The total amount of credit you have for the new credit card.</dd></div> <div id='KJE-D-NC_RATE' ><dt>New credit card rate</dt><dd>The annual percentage rate you will pay on the new credit card. The rate you enter is used to calculate the interest on all future payments for the credit card. The length of time to pay off this credit card may be much greater than calculated if you enter a low promotional rate that is only fixed for a short period of time.</dd></div> ";KJE.ReportText=" <!--HEADING \"Credit Card Optimizer\" HEADING--> <h2 class='KJEReportHeader KJEFontHeading'>You could save INTEREST_SAVINGS in interest!</h2> You owe a total of CC_OUTSTANDING_BALANCE. Your current minimum monthly payment is CC_MONTHLY_PAYMENT. If you continue to make the minimum payments it will take you CURRENT_PAYOFF to pay off this debt. The total interest paid will be INTEREST_CURRENT. By optimizing your credit cards you could save INTEREST_SAVINGS in interest. It will take you NEW_PAYOFF to pay off your optimized credit card balances. **GRAPH** <h2 class='KJEReportHeader KJEFontHeading'>Recommended credit card transfers</h2>The following is a list of credit card transfers that are recommended to create optimal balances on your accounts: <b>CREDIT_CARD_TRANSFERS</b> <p>Your resulting credit card balances are summarized below: <div class=KJEReportTableSidebySide><div class=\"KJEReportTableDivLeft\"><div class='KJEReportTableDiv'><table class='KJEReportTable'> <caption class='KJEHeaderRow KJEHeading'>Current</caption> <thead class='KJEReportTHeader'> <tr class=KJEHeaderRow><th class=\"KJEHeading KJECell40\">&nbsp;</th><th class=\"KJEHeading KJECell30\" scope='col'>Balance</th><th class=\"KJEHeading KJECell30\" scope='col'>Payment</th></tr> </thead> <tfoot class='KJEReportTFooter'> <tr class=KJEFooterRow><th class=\"KJELabel KJECellBorder\" scope='row'>Totals</th><td class=\"KJECellStrong KJECellBorder\">CC_OUTSTANDING_BALANCE</td><td class=\"KJECellStrong\">CC_MONTHLY_PAYMENT*</td></tr> </tfoot> <tbody class='KJEReportTBody'> <!--CREDIT_CARD_DETAILS_CURRENT--> </tbody> </table></div></div><div class=\"KJEReportTableDivRight\"><div class='KJEReportTableDiv'><table class='KJEReportTable KJEReportTableRight'> <caption class='KJEHeaderRow KJEHeading'>Optimized</caption> <thead class='KJEReportTHeader'> <tr class=KJEHeaderRow><th class=\"KJEHeading KJECell40\">&nbsp;</th><th class=\"KJEHeading KJECell30\" scope='col'>Balance</th><th class=\"KJEHeading KJECell30\" scope='col'>Payment</th></tr> </thead> <tfoot class='KJEReportTFooter'> <tr class=KJEFooterRow><th class=\"KJELabel KJECellBorder\" scope='row'>Totals</th><td class=\"KJECellStrong KJECellBorder\">CC_OUTSTANDING_BALANCE</td><td class=\"KJECellStrong\">NEW_MONTHLY_PAYMENT*</td></tr> </tfoot> <tbody class='KJEReportTBody'> <!--CREDIT_CARD_DETAILS_OPTIMAL--> </tbody> </table></div></div> </div> <div class=KJEInset>*We calculate your minimum monthly as 4% of your current outstanding balance or $15 which ever is more. Your minimum payment will decrease as your credit card balance decreases.</div> <h2 class='KJEScheduleHeader KJEFontHeading'>Optimized Payment Schedule</h2> **REPEATING GROUP** ";