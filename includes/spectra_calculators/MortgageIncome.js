
KJE.MortgageIncomeCalc=function(){this.nLength=6;this.ITEM_ANNUAL="Annual";this.ITEM_SEMIANNUAL="Semi-Annual";this.ITEM_MONTHLY="Monthly";this.ITEM_WEEKLY="Weekly";this.ITEM_HOURLY="Hourly";this.ITEM_BIWEEKLY="Bi-Weekly";this.ITEM_SEMIMONTHLY="Semi-Monthly";this.ITEM_QUARTERLY="Quarterly";this.ITEM_PERCENT="Percent";this.PMI_CALCULATE=KJE.parameters.get("PMI_CALCULATE",false);this.PMI_RATE=KJE.parameters.get("PMI_RATE",0.5);this.MONTHLY_PMI=KJE.parameters.getSet("MONTHLY_PMI",0);this.PMI_PERCENTAGE=KJE.parameters.get("PMI_PERCENTAGE",0.2);this.oldLOAN_AMOUNT=0;this.oldDOWNPAYMENT_20=0;this.bREAL_ESTATE_TAXES=false;this.REAL_ESTATE_TAXES_RATE=0.0125;this.bHAZARD_INSURANCE=false;this.HAZARD_INSURANCE_RATE=0.0035;this.bHOUSING_EXPENSES=false;this.HOUSING_EXPENSES_RATE=0;this.MAX_RATE=1;this.INCREMENT=KJE.parameters.get("INCREMENT",0.25);this.YOUR_INCOME_HIGH=0;this.YOUR_INCOME_LOW=0;this.LOAN_AMOUNT=0;this.DOWNPAYMENT=0;this.PURCHASE_PRICE=0;this.MONTHLY_HOUSING_EXPENSES=0;this.MONTHLY_LIABILITIES=0;this.LOAN_PI=0;this.LOAN_PITI=0;this.LOW_DEBT_PITI_RATE=0;this.HIGH_DEBT_PITI_RATE=0;this.SALARY_UNITS=this.ITEM_MONTHLY;this.COMMISSION_UNITS=this.ITEM_ANNUAL;this.BONUS_UNITS=this.ITEM_ANNUAL;this.OTHER_UNITS=this.ITEM_ANNUAL;this.REAL_ESTATE_TAXES_UNIT=this.ITEM_SEMIANNUAL;this.HAZARD_INSURANCE_UNIT=this.ITEM_ANNUAL;this.HOUSING_EXPENSES_UNIT=this.ITEM_MONTHLY;this.MORTGAGE_INSURANCE_UNIT=this.ITEM_MONTHLY;this.LOW_DEBT_PITI_RATE=KJE.parameters.get("LOW_DEBT_PITI_RATE",28);this.HIGH_DEBT_PITI_RATE=KJE.parameters.get("HIGH_DEBT_PITI_RATE",36);this.DS_RATE=KJE.FloatArray(this.nLength);this.DS_LOAN_PI=KJE.FloatArray(this.nLength);this.DS_LOAN_PITI=KJE.FloatArray(this.nLength);this.DS_INCOME_GRAPH1=KJE.FloatArray(this.nLength);this.DS_YOUR_INCOME=KJE.FloatArray(this.nLength);this.cats=null;this.sSchedule=new KJE.Repeating()};KJE.MortgageIncomeCalc.prototype.clear=function(){this.YOUR_INCOME=0;this.INTEREST_RATE=0;this.TERM_IN_MONTHS=0;this.REAL_ESTATE_TAXES=0;this.HAZARD_INSURANCE=0;this.HOUSING_EXPENSES=0;this.MONTHLY_PMI=0;this.AUTO_LOANS=0;this.CREDIT_CARDS=0;this.INSTALLMENT_LOANS=0;this.STUDENT_LOANS=0;this.ALIMONY_CHILD_SUPPORT=0;this.OTHER_LOANS=0;this.OTHER_LIABILITY=0;this.COBORROWER_AUTO_LOANS=0;this.COBORROWER_CREDIT_CARDS=0;this.COBORROWER_INSTALLMENT_LOANS=0;this.COBORROWER_STUDENT_LOANS=0;this.COBORROWER_ALIMONY_CHILD_SUPPORT=0;this.COBORROWER_OTHER_LOANS=0;this.COBORROWER_OTHER_LIABILITY=0};KJE.MortgageIncomeCalc.prototype.calculate=function(s){var f=KJE;var c=this.INTEREST_RATE;var e=this.TERM_IN_MONTHS;var k=this.DS_RATE;var r=this.DS_LOAN_PI;var a=this.DS_LOAN_PITI;var l=this.DS_INCOME_GRAPH1;var g=this.DS_YOUR_INCOME;var m=this.LOAN_AMOUNT;var t=this.DOWNPAYMENT;var p=this.PURCHASE_PRICE;if(p==0&&!this.PMI_CALCULATE){p=m}else{m=p-t;if(m<0){m=0}}this.MONTHLY_HOUSING_EXPENSES=this.sumHousing(m);this.MONTHLY_LIABILITIES=this.sumLiabilities();this.LOAN_PI=KJE.PMT(c/1200,e,m);this.LOAN_PITI=this.LOAN_PI+this.MONTHLY_HOUSING_EXPENSES;this.YOUR_INCOME_HIGH=(this.LOAN_PITI+this.MONTHLY_LIABILITIES)/(this.HIGH_DEBT_PITI_RATE/100);this.YOUR_INCOME_LOW=(this.LOAN_PITI/(this.LOW_DEBT_PITI_RATE/100));this.YOUR_INCOME=(this.YOUR_INCOME_LOW>this.YOUR_INCOME_HIGH?this.YOUR_INCOME_LOW:this.YOUR_INCOME_HIGH);if(this.LOAN_PITI<=0){this.LOAN_PITI=0}if(this.LOAN_PI<=0){this.LOAN_PI=0}if(this.LOAN_PI<0){throw ("Monthly liabilities and housing expenses exceed income.")}var j=this.nLength;var q=0;if(s){var h=this.sSchedule;h.clearRepeat();h.addHeader(h.sReportCol("Interest<br />Rate",1),h.sReportCol("Monthly<br />Liabilities ",3),(KJE.bHT?null:h.sReportCol("Monthly<br />Payment (PITI)",4)),h.sReportCol("Monthly<br />Payment (PI)",5),h.sReportCol("Mortgage<br />Amount",6),h.sReportCol("Required<br />Annual Income ",2))}this.cats=new Array(j);for(var o=1;o<=j;o++){q=o-1;if(o==1){k[q]=(c/100)}else{k[q]=f.round((k[q-1]+this.INCREMENT/100),5)}this.cats[q]=""+f.percent(k[q],3);r[q]=KJE.PMT(k[q]/12,e,m);a[q]=r[q]+this.MONTHLY_HOUSING_EXPENSES;var d=(a[q]+this.MONTHLY_LIABILITIES)/(this.HIGH_DEBT_PITI_RATE/100);var b=(a[q]/(this.LOW_DEBT_PITI_RATE/100));g[q]=(b>d?b:d);if(s){h.addRepeat(f.percent(k[q],3),f.dollars(this.MONTHLY_LIABILITIES),(KJE.bHT?null:f.dollars(a[q])),f.dollars(r[q]),f.dollars(m),f.dollars(this.DS_YOUR_INCOME[q]*12))}}this.YOUR_INCOME*=12;for(var o=0;o<j;o++){l[o]=(g[o]*12)}this.LOAN_AMOUNT=m};KJE.MortgageIncomeCalc.prototype.formatReport=function(b){var c=KJE;var a=this.iDecimal;var d=b;d=KJE.replace("LOW_DEBT_PITI_RATE",c.percent(this.LOW_DEBT_PITI_RATE/100),d);d=KJE.replace("HIGH_DEBT_PITI_RATE",c.percent(this.HIGH_DEBT_PITI_RATE/100),d);d=KJE.replace("YOUR_INCOME_HIGH",c.dollars(this.YOUR_INCOME_HIGH),d);d=KJE.replace("YOUR_INCOME_LOW",c.dollars(this.YOUR_INCOME_LOW),d);d=KJE.replace("YOUR_INCOME",c.dollars(this.YOUR_INCOME),d);d=KJE.replace("INCREMENT",c.number(this.INCREMENT,2),d);d=KJE.replace("LOAN_AMOUNT",c.dollars(this.LOAN_AMOUNT),d);d=KJE.replace("INTEREST_RATE",c.percent(this.INTEREST_RATE/100,3),d);d=KJE.replace("TERM_IN_MONTHS",c.number(this.TERM_IN_MONTHS),d);d=KJE.replace("TERM_IN_YEARS",c.number(this.TERM_IN_MONTHS/12),d);d=KJE.replace("MONTHLY_HOUSING_EXPENSES",c.dollars(this.MONTHLY_HOUSING_EXPENSES,2),d);d=KJE.replace("MONTHLY_LIABILITIES",c.dollars(this.MONTHLY_LIABILITIES,2),d);d=KJE.replace("LOAN_PITI",c.dollars(this.LOAN_PITI,2),d);d=KJE.replace("LOAN_PI",c.dollars(this.LOAN_PI,2),d);d=KJE.replace("REAL_ESTATE_TAXES_UNIT",KJE.MortgageIncomeCalc.ITEM_DESC[this.REAL_ESTATE_TAXES_UNIT],d);d=KJE.replace("HAZARD_INSURANCE_UNIT",KJE.MortgageIncomeCalc.ITEM_DESC[this.HAZARD_INSURANCE_UNIT],d);d=KJE.replace("HOUSING_EXPENSES_UNIT",KJE.MortgageIncomeCalc.ITEM_DESC[this.HOUSING_EXPENSES_UNIT],d);d=KJE.replace("MORTGAGE_INSURANCE_UNIT",this.ITEM_MONTHLY,d);d=KJE.replace("REAL_ESTATE_TAXES",c.dollars(this.REAL_ESTATE_TAXES,2),d);d=KJE.replace("HAZARD_INSURANCE",c.dollars(this.HAZARD_INSURANCE,2),d);d=KJE.replace("HOUSING_EXPENSES",c.dollars(this.HOUSING_EXPENSES,2),d);d=KJE.replace("MORTGAGE_INSURANCE",c.dollars(this.MONTHLY_PMI,2),d);d=KJE.replace("COBORROWER_AUTO_LOANS",c.dollars(this.COBORROWER_AUTO_LOANS,2),d);d=KJE.replace("COBORROWER_CREDIT_CARDS",c.dollars(this.COBORROWER_CREDIT_CARDS,2),d);d=KJE.replace("COBORROWER_INSTALLMENT_LOANS",c.dollars(this.COBORROWER_INSTALLMENT_LOANS,2),d);d=KJE.replace("COBORROWER_STUDENT_LOANS",c.dollars(this.COBORROWER_STUDENT_LOANS,2),d);d=KJE.replace("COBORROWER_ALIMONY_CHILD_SUPPORT",c.dollars(this.COBORROWER_ALIMONY_CHILD_SUPPORT,2),d);d=KJE.replace("COBORROWER_OTHER_LOANS",c.dollars(this.COBORROWER_OTHER_LOANS,2),d);d=KJE.replace("COBORROWER_OTHER_LIABILITY",c.dollars(this.COBORROWER_OTHER_LIABILITY,2),d);d=KJE.replace("AUTO_LOANS",c.dollars(this.AUTO_LOANS,2),d);d=KJE.replace("CREDIT_CARDS",c.dollars(this.CREDIT_CARDS,2),d);d=KJE.replace("INSTALLMENT_LOANS",c.dollars(this.INSTALLMENT_LOANS,2),d);d=KJE.replace("STUDENT_LOANS",c.dollars(this.STUDENT_LOANS,2),d);d=KJE.replace("ALIMONY_CHILD_SUPPORT",c.dollars(this.ALIMONY_CHILD_SUPPORT,2),d);d=KJE.replace("OTHER_LOANS",c.dollars(this.OTHER_LOANS,2),d);d=KJE.replace("OTHER_LIABILITY",c.dollars(this.OTHER_LIABILITY,2),d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.MortgageIncomeCalc.prototype.sumLiabilities=function(){return this.AUTO_LOANS+this.CREDIT_CARDS+this.INSTALLMENT_LOANS+this.STUDENT_LOANS+this.ALIMONY_CHILD_SUPPORT+this.OTHER_LOANS+this.OTHER_LIABILITY+this.COBORROWER_AUTO_LOANS+this.COBORROWER_CREDIT_CARDS+this.COBORROWER_INSTALLMENT_LOANS+this.COBORROWER_STUDENT_LOANS+this.COBORROWER_ALIMONY_CHILD_SUPPORT+this.COBORROWER_OTHER_LOANS+this.COBORROWER_OTHER_LIABILITY};KJE.MortgageIncomeCalc.prototype.sumIncome=function(){var c=0;var b=KJE.MortgageIncomeCalc.SALARY_PERIODS_YEARLY;var a=b[this.SALARY_UNITS];c+=(a==12?this.SALARY:(this.SALARY*a)/12);a=b[this.COMMISSION_UNITS];c+=(a==12?this.COMMISSION:(this.COMMISSION*a)/12);a=b[this.BONUS_UNITS];c+=(a==12?this.BONUS:(this.BONUS*a)/12);a=b[this.OTHER_UNITS];c+=(a==12?this.OTHER_INCOME:(this.OTHER_INCOME*a)/12);a=b[this.COBORROWER_SALARY_UNITS];c+=(a==12?this.COBORROWER_SALARY:(this.COBORROWER_SALARY*a)/12);a=b[this.COBORROWER_COMMISSION_UNITS];c+=(a==12?this.COBORROWER_COMMISSION:(this.COBORROWER_COMMISSION*a)/12);a=b[this.COBORROWER_BONUS_UNITS];c+=(a==12?this.COBORROWER_BONUS:(this.COBORROWER_BONUS*a)/12);a=b[this.COBORROWER_OTHER_INCOME_UNITS];c+=(a==12?this.COBORROWER_OTHER_INCOME:(this.COBORROWER_OTHER_INCOME*a)/12);return c};KJE.MortgageIncomeCalc.prototype.sumHousing=function(f){var b=0;var e=0;var a=KJE.round;if(this.bREAL_ESTATE_TAXES){this.REAL_ESTATE_TAXES=a((this.REAL_ESTATE_TAXES_RATE)*f,2);this.REAL_ESTATE_TAXES_UNIT=KJE.MortgageIncomeCalc.ITEM_ANNUAL}if(this.REAL_ESTATE_TAXES_UNIT==(KJE.MortgageIncomeCalc.ITEM_ANNUAL)){e=this.REAL_ESTATE_TAXES/12}else{if(this.REAL_ESTATE_TAXES_UNIT==(KJE.MortgageIncomeCalc.ITEM_SEMIANNUAL)){e=this.REAL_ESTATE_TAXES/6}else{if(this.REAL_ESTATE_TAXES_UNIT==(KJE.MortgageIncomeCalc.ITEM_MONTHLY)){e=this.REAL_ESTATE_TAXES}}}if(!this.bREAL_ESTATE_TAXES){this.REAL_ESTATE_TAXES_RATE=a(e*12/f,5);if(this.REAL_ESTATE_TAXES_RATE>1||this.REAL_ESTATE_TAXES_RATE==NaN){this.REAL_ESTATE_TAXES_RATE=this.MAX_RATE}if(e==0){this.REAL_ESTATE_TAXES_RATE=0}}b+=e;e=0;if(this.bHAZARD_INSURANCE){this.HAZARD_INSURANCE=a((this.HAZARD_INSURANCE_RATE)*f,2);this.HAZARD_INSURANCE_UNIT=KJE.MortgageIncomeCalc.ITEM_ANNUAL}if(this.HAZARD_INSURANCE_UNIT==(KJE.MortgageIncomeCalc.ITEM_ANNUAL)){e=this.HAZARD_INSURANCE/12}else{if(this.HAZARD_INSURANCE_UNIT==(KJE.MortgageIncomeCalc.ITEM_SEMIANNUAL)){e=this.HAZARD_INSURANCE/6}else{if(this.HAZARD_INSURANCE_UNIT==(KJE.MortgageIncomeCalc.ITEM_MONTHLY)){e=this.HAZARD_INSURANCE}}}if(!this.bHAZARD_INSURANCE){this.HAZARD_INSURANCE_RATE=a(e*12/f,5);if(this.HAZARD_INSURANCE_RATE>1||this.HAZARD_INSURANCE_RATE==NaN){this.HAZARD_INSURANCE_RATE=this.MAX_RATE}if(e==0){this.HAZARD_INSURANCE_RATE=0}}b+=e;e=0;if(this.bHOUSING_EXPENSES){this.HOUSING_EXPENSES=a((this.HOUSING_EXPENSES_RATE)*f,2);this.HOUSING_EXPENSES_UNIT=KJE.MortgageIncomeCalc.ITEM_ANNUAL}if(this.HOUSING_EXPENSES_UNIT==(KJE.MortgageIncomeCalc.ITEM_ANNUAL)){e=this.HOUSING_EXPENSES/12}else{if(this.HOUSING_EXPENSES_UNIT==(KJE.MortgageIncomeCalc.ITEM_SEMIANNUAL)){e=this.HOUSING_EXPENSES/6}else{if(this.HOUSING_EXPENSES_UNIT==(KJE.MortgageIncomeCalc.ITEM_MONTHLY)){e=this.HOUSING_EXPENSES}}}if(!this.bHOUSING_EXPENSES){this.HOUSING_EXPENSES_RATE=a(e*12/f,5);if(this.HOUSING_EXPENSES_RATE>1||this.HOUSING_EXPENSES_RATE==NaN){this.HOUSING_EXPENSES_RATE=this.MAX_RATE}if(e==0){this.HOUSING_EXPENSES_RATE=0}}b+=e;e=0;this.MONTH_PMI_EXEMPT=false;var c=this.PURCHASE_PRICE*this.PMI_PERCENTAGE;if(this.PMI_CALCULATE&&(c!=this.oldDOWNPAYMENT_20||f!=this.oldLOAN_AMOUNT)){if(c>this.DOWNPAYMENT){this.MONTHLY_PMI=f*(this.PMI_RATE/1200)}else{this.MONTHLY_PMI=0;this.MONTH_PMI_EXEMPT=true}}this.oldLOAN_AMOUNT=f;this.oldDOWNPAYMENT_20=c;b+=this.MONTHLY_PMI;return b};KJE.MortgageIncomeCalc.ITEM_ANNUAL=0;KJE.MortgageIncomeCalc.ITEM_SEMIANNUAL=1;KJE.MortgageIncomeCalc.ITEM_MONTHLY=2;KJE.MortgageIncomeCalc.ITEM_WEEKLY=3;KJE.MortgageIncomeCalc.ITEM_HOURLY=4;KJE.MortgageIncomeCalc.ITEM_BIWEEKLY=5;KJE.MortgageIncomeCalc.ITEM_SEMIMONTHLY=6;KJE.MortgageIncomeCalc.ITEM_QUARTERLY=7;KJE.MortgageIncomeCalc.ITEM_PERCENT=8;KJE.MortgageIncomeCalc.ITEM_DESC=["Annual","Semi-Annual","Monthly","Weekly","Hourly","Bi-Weekly","Semi-Monthly","Quarterly","Annually"];KJE.MortgageIncomeCalc.ITEM_LENGTH=[12,6,1,52,2080,26,2,3];KJE.MortgageIncomeCalc.EXPENSE_INDEX=[KJE.MortgageIncomeCalc.ITEM_ANNUAL,KJE.MortgageIncomeCalc.ITEM_SEMIANNUAL,KJE.MortgageIncomeCalc.ITEM_MONTHLY,KJE.MortgageIncomeCalc.ITEM_PERCENT];KJE.MortgageIncomeCalc.EXPENSE_DESC=["Annual","Semi-Annual","Monthly","Percent"];KJE.MortgageIncomeCalc.EXPENSE_INDEX2=[KJE.MortgageIncomeCalc.ITEM_ANNUAL,KJE.MortgageIncomeCalc.ITEM_SEMIANNUAL,KJE.MortgageIncomeCalc.ITEM_MONTHLY];KJE.MortgageIncomeCalc.EXPENSE_DESC2=[KJE.MortgageIncomeCalc.EXPENSE_DESC[0],KJE.MortgageIncomeCalc.EXPENSE_DESC[1],KJE.MortgageIncomeCalc.EXPENSE_DESC[2]];KJE.MortgageIncomeCalc.getITemDrop=function(a,d,c,f){if(a){var b=KJE.MortgageIncomeCalc.EXPENSE_INDEX2;var e=KJE.MortgageIncomeCalc.EXPENSE_DESC2}else{var b=KJE.MortgageIncomeCalc.EXPENSE_INDEX;var e=KJE.MortgageIncomeCalc.EXPENSE_DESC}return KJE.getDropBox(d,KJE.parameters.get(d,(!c?KJE.MortgageIncomeCalc.ITEM_ANNUAL:c)),b,e,f)};KJE.CalcName="Mortgage Required Income";KJE.CalcType="MortgageIncome";KJE.CalculatorTitleTemplate="At KJE2 your required annual income is KJE1<div class='KJESubTitle'>Maximum monthly payment (PITI) KJE3</div>";KJE.parseInputs=function(a){a=KJE.replace("**REAL_ESTATE_TAXES_UNIT**",KJE.MortgageIncomeCalc.getITemDrop(KJE.parameters.get("REAL_ESTATE_TAXES_RATE_HIDE",false),"REAL_ESTATE_TAXES_UNIT",KJE.MortgageIncomeCalc.ITEM_SEMIANNUAL),a);a=KJE.replace("**HAZARD_INSURANCE_UNIT**",KJE.MortgageIncomeCalc.getITemDrop(KJE.parameters.get("HAZARD_INSURANCE_RATE_HIDE",false),"HAZARD_INSURANCE_UNIT",KJE.MortgageIncomeCalc.ITEM_ANNUAL),a);a=KJE.replace("**HOUSING_EXPENSES_UNIT**",KJE.MortgageIncomeCalc.getITemDrop(KJE.parameters.get("HOUSING_EXPENSES_RATE_HIDE",false),"HOUSING_EXPENSES_UNIT",KJE.MortgageIncomeCalc.ITEM_MONTHLY),a);a=KJE.replace("**TERM_IN_YEARS**",KJE.getMortgageTermDrop("TERM_IN_YEARS",30),a);a=KJE.replace("**COBORROWER_LIABILITIES**",KJE.parameters.get("MSG_COBORROWER_LIABILITIES","Co-borrower monthly liabilities:"),a);return a};KJE.initialize=function(){KJE.CalcControl=new KJE.MortgageIncomeCalc();KJE.GuiControl=new KJE.MortgageIncome(KJE.CalcControl)};KJE.MortgageIncome=function(k){var e=KJE;var c=KJE.gLegend;var f=KJE.inputs.items;KJE.MortgageAmtSlider("PURCHASE_PRICE","Purchase price");KJE.MortgageAmtSlider("DOWNPAYMENT","Down payment");KJE.Label("LOAN_AMOUNT_CALCULATED","Loan amount",null,null,"KJEBold");KJE.MortgageAmtSlider("LOAN_AMOUNT","Desired mortgage amount");KJE.PercentSlider("INTEREST_RATE","Start interest rates at",0,25,3);KJE.DollarSlider("REAL_ESTATE_TAXES","Real estate taxes",0,100000,0);KJE.DropBox("REAL_ESTATE_TAXES_UNIT","Payment frequency");KJE.Nbr("REAL_ESTATE_TAXES_RATE","Annual rate",0,k.MAX_RATE*100,3,e.FMT_PERCENT);KJE.DollarSlider("HAZARD_INSURANCE","Hazard insurance",0,100000,0);KJE.DropBox("HAZARD_INSURANCE_UNIT","Payment frequency");KJE.Nbr("HAZARD_INSURANCE_RATE","Annual rate",0,k.MAX_RATE*100,3,e.FMT_PERCENT);KJE.DollarSlider("HOUSING_EXPENSES","Association dues or fees",0,100000,0);KJE.DropBox("HOUSING_EXPENSES_UNIT","Payment frequency");KJE.Nbr("HOUSING_EXPENSES_RATE","Annual rate",0,k.MAX_RATE*100,3,e.FMT_PERCENT);KJE.DollarSlider("MONTHLY_PMI","Monthly PMI",0,1000,2);f.MONTHLY_PMI.setValue(KJE.parameters.get("MORTGAGE_INSURANCE",0),true);if(k.PMI_CALCULATE){f.LOAN_AMOUNT.hide()}else{f.LOAN_AMOUNT_CALCULATED.hide();f.PURCHASE_PRICE.hide();f.DOWNPAYMENT.hide()}KJE.DollarSlider("AUTO_LOANS","Auto loans",0,100000);KJE.DollarSlider("CREDIT_CARDS","Credit cards",0,100000);KJE.DollarSlider("INSTALLMENT_LOANS","Installment loans",0,100000);KJE.DollarSlider("STUDENT_LOANS","Student loans",0,100000);KJE.DollarSlider("ALIMONY_CHILD_SUPPORT","Alimony & child support",0,100000);KJE.DollarSlider("OTHER_LOANS","Other loans",0,100000);KJE.DollarSlider("OTHER_LIABILITY","Other",0,100000);KJE.DollarSlider("COBORROWER_AUTO_LOANS","Auto Loans",0,100000);KJE.DollarSlider("COBORROWER_CREDIT_CARDS","Credit cards",0,100000);KJE.DollarSlider("COBORROWER_INSTALLMENT_LOANS","Installment loans",0,100000);KJE.DollarSlider("COBORROWER_STUDENT_LOANS","Student loans",0,100000);KJE.DollarSlider("COBORROWER_ALIMONY_CHILD_SUPPORT","Alimony child support",0,100000);KJE.DollarSlider("COBORROWER_OTHER_LOANS","Other loans",0,100000);KJE.DollarSlider("COBORROWER_OTHER_LIABILITY","Other",0,100000);KJE.DropBox("TERM_IN_YEARS","Loan term");var g=KJE.gNewGraph(KJE.gCOLUMN,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH_TITLE","Required Annual Income for a Variety of Interest Rates"));g._showItemLabel=true;g._showItemLabelOnTop=true;g._legend.setVisible(false);KJE.addDiv("INPUTS",KJE.colorList[0]);var b=KJE.parameters.get("MSG_DROPPER3_TITLE","Monthly housing expenses:");var d=KJE.parameters.get("MSG_DROPPER3_CLOSETITLE","Total KJE1");var i=function(){return b+"|"+KJE.subText(KJE.getKJEReplaced(d,e.dollars(k.MONTHLY_HOUSING_EXPENSES)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("INPUTS3",false,i,i),KJE.colorList[0]);var j=KJE.parameters.get("MSG_DROPPER4_TITLE","Monthly liabilities:");var a=KJE.parameters.get("MSG_DROPPER4_CLOSETITLE","Total KJE1");var h=function(){return j+"|"+KJE.subText(KJE.getKJEReplaced(a,e.dollars(k.MONTHLY_LIABILITIES)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("INPUTS4",false,h,h),KJE.colorList[0])};KJE.MortgageIncome.prototype.setValues=function(b){var a=KJE.inputs.items;b.LOAN_AMOUNT=a.LOAN_AMOUNT.getValue();b.INTEREST_RATE=a.INTEREST_RATE.getValue();b.TERM_IN_MONTHS=Math.round(a.TERM_IN_YEARS.getValue())*12;b.REAL_ESTATE_TAXES_UNIT=a.REAL_ESTATE_TAXES_UNIT.getValue();b.HAZARD_INSURANCE_UNIT=a.HAZARD_INSURANCE_UNIT.getValue();b.HOUSING_EXPENSES_UNIT=a.HOUSING_EXPENSES_UNIT.getValue();b.bREAL_ESTATE_TAXES=(KJE.MortgageIncomeCalc.ITEM_PERCENT==b.REAL_ESTATE_TAXES_UNIT);b.bHAZARD_INSURANCE=(KJE.MortgageIncomeCalc.ITEM_PERCENT==b.HAZARD_INSURANCE_UNIT);b.bHOUSING_EXPENSES=(KJE.MortgageIncomeCalc.ITEM_PERCENT==b.HOUSING_EXPENSES_UNIT);if(b.bREAL_ESTATE_TAXES){b.REAL_ESTATE_TAXES_RATE=a.REAL_ESTATE_TAXES_RATE.getValue()/100;a.REAL_ESTATE_TAXES_RATE.enable();a.REAL_ESTATE_TAXES.disable()}else{b.REAL_ESTATE_TAXES=a.REAL_ESTATE_TAXES.getValue();a.REAL_ESTATE_TAXES_RATE.disable();a.REAL_ESTATE_TAXES.enable()}if(b.bHAZARD_INSURANCE){b.HAZARD_INSURANCE_RATE=a.HAZARD_INSURANCE_RATE.getValue()/100;a.HAZARD_INSURANCE_RATE.enable();a.HAZARD_INSURANCE.disable()}else{b.HAZARD_INSURANCE=a.HAZARD_INSURANCE.getValue();a.HAZARD_INSURANCE.enable();a.HAZARD_INSURANCE_RATE.disable()}if(b.bHOUSING_EXPENSES){b.HOUSING_EXPENSES_RATE=a.HOUSING_EXPENSES_RATE.getValue()/100;a.HOUSING_EXPENSES_RATE.enable();a.HOUSING_EXPENSES.disable()}else{b.HOUSING_EXPENSES=a.HOUSING_EXPENSES.getValue();a.HOUSING_EXPENSES_RATE.disable();a.HOUSING_EXPENSES.enable()}b.MONTHLY_PMI=a.MONTHLY_PMI.getValue();b.DOWNPAYMENT=a.DOWNPAYMENT.getValue();b.PURCHASE_PRICE=a.PURCHASE_PRICE.getValue();b.AUTO_LOANS=a.AUTO_LOANS.getValue();b.CREDIT_CARDS=a.CREDIT_CARDS.getValue();b.INSTALLMENT_LOANS=a.INSTALLMENT_LOANS.getValue();b.STUDENT_LOANS=a.STUDENT_LOANS.getValue();b.ALIMONY_CHILD_SUPPORT=a.ALIMONY_CHILD_SUPPORT.getValue();b.OTHER_LOANS=a.OTHER_LOANS.getValue();b.OTHER_LIABILITY=a.OTHER_LIABILITY.getValue();b.COBORROWER_AUTO_LOANS=a.COBORROWER_AUTO_LOANS.getValue();b.COBORROWER_CREDIT_CARDS=a.COBORROWER_CREDIT_CARDS.getValue();b.COBORROWER_INSTALLMENT_LOANS=a.COBORROWER_INSTALLMENT_LOANS.getValue();b.COBORROWER_STUDENT_LOANS=a.COBORROWER_STUDENT_LOANS.getValue();b.COBORROWER_ALIMONY_CHILD_SUPPORT=a.COBORROWER_ALIMONY_CHILD_SUPPORT.getValue();b.COBORROWER_OTHER_LOANS=a.COBORROWER_OTHER_LOANS.getValue();b.COBORROWER_OTHER_LIABILITY=a.COBORROWER_OTHER_LIABILITY.getValue()};KJE.MortgageIncome.prototype.refresh=function(e){var d=KJE;var c=KJE.gLegend;var b=KJE.inputs.items;var a=KJE.gGraphs[0];KJE.setTitleTemplate(d.dollars(e.YOUR_INCOME),d.percent(e.INTEREST_RATE/100,3),d.dollars(e.LOAN_PITI,2));a.removeAll();a.setGraphCategories(e.cats);a.add(new KJE.gGraphDataSeries(e.DS_INCOME_GRAPH1,"Required income",a.getColor(1)));a.paint();b.REAL_ESTATE_TAXES.setValue(e.REAL_ESTATE_TAXES,true);b.HAZARD_INSURANCE.setValue(e.HAZARD_INSURANCE,true);b.HOUSING_EXPENSES.setValue(e.HOUSING_EXPENSES,true);b.REAL_ESTATE_TAXES_RATE.setValue(e.REAL_ESTATE_TAXES_RATE*100,true);b.HAZARD_INSURANCE_RATE.setValue(e.HAZARD_INSURANCE_RATE*100,true);b.HOUSING_EXPENSES_RATE.setValue(e.HOUSING_EXPENSES_RATE*100,true);b.LOAN_AMOUNT_CALCULATED.setText(d.dollars(e.LOAN_AMOUNT,2));b.MONTHLY_PMI.setValue(d.round(e.MONTHLY_PMI,2),true);if(e.MONTH_PMI_EXEMPT){b.MONTHLY_PMI.disable()}else{b.MONTHLY_PMI.enable()}};KJE.InputScreenText=" <div id=KJE-D-INPUTS> <div id=\"KJE-C-PURCHASE_PRICE\"><input id=\"KJE-PURCHASE_PRICE\" /></div> <div id=\"KJE-C-DOWNPAYMENT\"><input id=\"KJE-DOWNPAYMENT\" /></div> <div id=\"KJE-C-LOAN_AMOUNT_CALCULATED\"><div id=\"KJE-LOAN_AMOUNT_CALCULATED\"></div></div> <div id='KJE-C-LOAN_AMOUNT'><input id='KJE-LOAN_AMOUNT' /></div> <div id='KJE-C-INTEREST_RATE'><input id='KJE-INTEREST_RATE' /></div> <div id='KJE-C-TERM_IN_YEARS'>**TERM_IN_YEARS**</div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS4><div id=KJE-P-INPUTS4>Input information:</div></div> <div id=KJE-E-INPUTS4 > <div id='KJE-C-AUTO_LOANS'><input id='KJE-AUTO_LOANS' /></div> <div id='KJE-C-CREDIT_CARDS'><input id='KJE-CREDIT_CARDS' /></div> <div id='KJE-C-INSTALLMENT_LOANS'><input id='KJE-INSTALLMENT_LOANS' /></div> <div id='KJE-C-STUDENT_LOANS'><input id='KJE-STUDENT_LOANS' /></div> <div id='KJE-C-ALIMONY_CHILD_SUPPORT'><input id='KJE-ALIMONY_CHILD_SUPPORT' /></div> <div id='KJE-C-OTHER_LOANS'><input id='KJE-OTHER_LOANS' /></div> <div id='KJE-C-OTHER_LIABILITY'><input id='KJE-OTHER_LIABILITY' /></div> <hr class=KJEDivide /> <div class=\"KJEToggleSubTitle\">**COBORROWER_LIABILITIES**</div> <div id='KJE-C-COBORROWER_AUTO_LOANS'><input id='KJE-COBORROWER_AUTO_LOANS' /></div> <div id='KJE-C-COBORROWER_CREDIT_CARDS'><input id='KJE-COBORROWER_CREDIT_CARDS' /></div> <div id='KJE-C-COBORROWER_INSTALLMENT_LOANS'><input id='KJE-COBORROWER_INSTALLMENT_LOANS' /></div> <div id='KJE-C-COBORROWER_STUDENT_LOANS'><input id='KJE-COBORROWER_STUDENT_LOANS' /></div> <div id='KJE-C-COBORROWER_ALIMONY_CHILD_SUPPORT'><input id='KJE-COBORROWER_ALIMONY_CHILD_SUPPORT' /></div> <div id='KJE-C-COBORROWER_OTHER_LOANS'><input id='KJE-COBORROWER_OTHER_LOANS' /></div> <div id='KJE-C-COBORROWER_OTHER_LIABILITY'><input id='KJE-COBORROWER_OTHER_LIABILITY' /></div> <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS3><div id=KJE-P-INPUTS3>Input information:</div></div> <div id=KJE-E-INPUTS3 > <div id='KJE-C-REAL_ESTATE_TAXES'><input id='KJE-REAL_ESTATE_TAXES' /></div> <div id='KJE-C-REAL_ESTATE_TAXES_UNIT'>**REAL_ESTATE_TAXES_UNIT**</div> <div id='KJE-C-REAL_ESTATE_TAXES_RATE'><input id='KJE-REAL_ESTATE_TAXES_RATE' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-HAZARD_INSURANCE'><input id='KJE-HAZARD_INSURANCE' /></div> <div id='KJE-C-HAZARD_INSURANCE_UNIT'>**HAZARD_INSURANCE_UNIT**</div> <div id='KJE-C-HAZARD_INSURANCE_RATE'><input id='KJE-HAZARD_INSURANCE_RATE' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-HOUSING_EXPENSES'><input id='KJE-HOUSING_EXPENSES' /></div> <div id='KJE-C-HOUSING_EXPENSES_UNIT'>**HOUSING_EXPENSES_UNIT**</div> <div id='KJE-C-HOUSING_EXPENSES_RATE'><input id='KJE-HOUSING_EXPENSES_RATE' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-MONTHLY_PMI'><input id='KJE-MONTHLY_PMI' /></div> <div style=\"height:10px\"></div> </div> **GRAPH1** ";KJE.DefinitionText=" <div id='KJE-D-LOAN_AMOUNT' ><dt>Desired mortgage amount</dt><dd>The total loan amount your are interested in receiving.</dd></div> <div><dt>Monthly housing expenses</dt><dd>Your monthly housing expenses from the housing expenses worksheet. The items entered as housing expenses make up the taxes and insurance portion of your monthly PITI payment.</dd></div> <div><dt>Monthly liabilities</dt><dd>Your monthly liabilities from the liabilities worksheet. Your monthly liabilities are used to calculate your maximum PITI.</dd></div> <div><dt>Monthly housing payment (PITI)</dt><dd>This is your total Principal and Interest, Tax and Insurance (PITI) payment per month. This includes your principal, interest, real estate taxes, hazard insurance, association dues or fees and principal mortgage insurance (PMI). Maximum monthly payment (PITI)</dd></div> <div><dt>Maximum principal and interest (PI)</dt><dd>This is your maximum monthly principal and interest payment. It is calculated by subtracting your monthly taxes and insurance from your monthly PITI payment.</dd></div> <div id='KJE-D-INTEREST_RATE' ><dt>Start interest rates at</dt><dd>The current interest rate you could receive on your mortgage. This is used as the starting point for displaying a range of interest rates and the resulting mortgage amount.</dd></div> <div id='KJE-D-TERM_IN_YEARS' ><dt>Term in years</dt><dd>The number of years over which you will repay this loan. The most common mortgage terms are 15 years and 30 years.</dd></div> <div id='KJE-D-REAL_ESTATE_TAXES'><dt>Real estate taxes</dt><dd>The amount you expect to pay in property taxes. This is normally paid either semi-annually or annually.</dd></div> <div id='KJE-D-HAZARD_INSURANCE'><dt>Hazard insurance</dt><dd>The amount you expect to pay for hazard insurance. This is normally paid either semi-annually or annually.</dd></div> <div id='KJE-D-HOUSING_EXPENSES'><dt>Association dues or fees</dt><dd>The amount you expect to pay a homeowner's association or other required monthly fee. This is normally paid monthly.</dd></div> <div id='KJE-D-MONTHLY_PMI'><dt>Monthly PMI</dt><dd>Monthly cost of Private Mortgage Insurance (PMI). For loans secured with less than 20% down, PMI is estimated at 0.5% of your loan balance each year.</dd></div> ";KJE.ReportText=' <!--HEADING "Mortgage Required Income" HEADING--> <h2 class=\'KJEReportHeader KJEFontHeading\'>At INTEREST_RATE your required income for a LOAN_AMOUNT mortgage is YOUR_INCOME.</h2>An income of YOUR_INCOME provides for a maximum Principal, Interest, Taxes and Insurance (PITI) payment of LOAN_PITI. After taxes and insurance your principal and interest payment (PI) of LOAN_PI would pay for a LOAN_AMOUNT mortgage, with an interest rate of INTEREST_RATE and a term of TERM_IN_YEARS years. **GRAPH** <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Mortgage Required Income Results</caption> <tbody class=\'KJEReportTBody\'> <tr class=KJEOddRow><th class="KJELabel KJECellBorder KJECell50" scope=\'row\'>Term </th><td class="KJECell KJECell50"> TERM_IN_YEARS years</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Interest rate </th><td class="KJECell">INTEREST_RATE</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Housing payment (PITI) </th><td class="KJECell"> LOAN_PITI </td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Principal & interest payment (PI) </th><td class="KJECell"> LOAN_PI </td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Monthly housing expenses </th><td class="KJECell"> MONTHLY_HOUSING_EXPENSES </td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Monthly liabilities </th><td class="KJECell"> MONTHLY_LIABILITIES </td></tr> </tbody> <tfoot class=\'KJEReportTFooter\'> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder" scope=\'row\'>Required annual income </th><td class="KJECellStrong"> YOUR_INCOME </td></tr> </tfoot> </table> </div> <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Housing Expenses</caption> <tbody class=\'KJEReportTBody\'> <tr class=KJEOddRow><th class="KJELabel KJECellBorder KJECell50" scope=\'row\'>Real estate taxes </th><td class="KJECell KJECell50">REAL_ESTATE_TAXES REAL_ESTATE_TAXES_UNIT </td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Hazard insurance </th><td class="KJECell">HAZARD_INSURANCE HAZARD_INSURANCE_UNIT </td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Housing expenses </th><td class="KJECell">HOUSING_EXPENSES HOUSING_EXPENSES_UNIT</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Mortgage insurance </th><td class="KJECell">MORTGAGE_INSURANCE MORTGAGE_INSURANCE_UNIT</td></tr> </tbody> </table> </div> <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Current Monthly Liabilities</caption> <thead class=\'KJEReportTHeader\'> <tr class=KJEHeaderRow><th class="KJEHeading KJECell50" scope=\'row\'>&nbsp; </th><th class="KJEHeading KJECell25" scope=\'col\'>Borrower</th><th class="KJEHeading KJECell25" scope=\'col\'>Co-borrower</th></tr> </thead> <tbody class=\'KJEReportTBody\'> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Auto loans </th><td class="KJECell KJECellBorder"> AUTO_LOANS </td><td class="KJECell"> COBORROWER_AUTO_LOANS </td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Credit cards </th><td class="KJECell KJECellBorder"> CREDIT_CARDS </td><td class="KJECell"> COBORROWER_CREDIT_CARDS </td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Installment loans </th><td class="KJECell KJECellBorder"> INSTALLMENT_LOANS </td><td class="KJECell"> COBORROWER_INSTALLMENT_LOANS </td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Student loans </th><td class="KJECell KJECellBorder"> STUDENT_LOANS </td><td class="KJECell"> COBORROWER_STUDENT_LOANS </td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Alimony & child support </th><td class="KJECell KJECellBorder"> ALIMONY_CHILD_SUPPORT </td><td class="KJECell"> COBORROWER_ALIMONY_CHILD_SUPPORT </td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Other loans </th><td class="KJECell KJECellBorder"> OTHER_LOANS </td><td class="KJECell"> COBORROWER_OTHER_LOANS </td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Other </th><td class="KJECell KJECellBorder"> OTHER_LIABILITY </td><td class="KJECell"> COBORROWER_OTHER_LIABILITY </td></tr> </tbody> </table> </div> <p> <h2 class=\'KJEReportHeader KJEFontHeading\'>Qualify Calculation</h2>Your LOAN_PITI maximum monthly payment (PITI) is calculated by taking the lower of these two calculations:<br><br> <h2 class=\'KJEReportHeader KJEFontHeading\'>Qualify Calculation</h2>Your LOAN_PITI monthly housing payment (PITI) is calculated by taking the higher of these two calculations:<BR><BR> <table width=80%> <tr><td>1. Monthly PITI/ LOW_DEBT_PITI_RATE = monthly required income</td></tr> <tr><td>&nbsp;&nbsp;&nbsp;&nbsp;Which is: LOAN_PITI / LOW_DEBT_PITI_RATE = YOUR_INCOME_LOW<BR><BR></td></tr> <tr><td>2. (Monthly PITI + Monthly Liabilities) / HIGH_DEBT_PITI_RATE = Monthly required income</td></tr> <tr><td>&nbsp;&nbsp;&nbsp;&nbsp;Which is: (LOAN_PITI + MONTHLY_LIABILITIES) / HIGH_DEBT_PITI_RATE = YOUR_INCOME_HIGH</td></tr> </table> <BR> <h2 class=\'KJEScheduleHeader KJEFontHeading\'>Required Income for a Range of Interest Rates</h2> **REPEATING GROUP** ';
// 01/02/2023 Copyright 2023 KJE Computer Solutions, Inc.  Licensed for use on https://www.spectracu.com

